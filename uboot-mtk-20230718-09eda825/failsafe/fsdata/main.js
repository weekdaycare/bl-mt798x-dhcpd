function ajax(n) { var t, i; (t = window.XMLHttpRequest ? new XMLHttpRequest : new ActiveXObject("Microsoft.XMLHTTP")).upload.addEventListener("progress", function (t) { n.progress && n.progress(t) }); t.onreadystatechange = function () { 4 == t.readyState && 200 == t.status && n.done && n.done(t.responseText) }; n.timeout && (t.timeout = n.timeout); i = "GET"; n.data && (i = "POST"); t.open(i, n.url); t.send(n.data) } function tt(n, i) { const r = t(n); return "string" != typeof r ? r : i ? r.replace(/\{(\w+)\}/g, (n, t) => null != i[t] ? i[t] : "{" + t + "}") : r } function resolveParams(n) { if (!n) return {}; const i = {}; return Object.keys(n).forEach(r => { const u = n[r]; i[r] = u && "object" == typeof u && u.t ? t(u.t) : u }), i } function detectLanguage() { const n = localStorage.getItem("lang"); return n && "auto" !== n ? n : ((navigator.languages || [navigator.language || "en"])[0] || "en").toLowerCase().startsWith("zh") ? "zh-CN" : "en" } function t(n) { const i = detectLanguage(), r = n.split("."); let t = I18N_DICTIONARY[i]; for (const i of r) { if (!t || "object" != typeof t) return n; t = t[i] } return "string" == typeof t ? t : n } function applyPageTranslations() { const n = (location.pathname || "").toLowerCase(), u = getPageIdFromPath(); if (!window.__skipTemplateTranslation) { const f = document.querySelector('input[type="button"][value]'); f && (f.value = t("common.actions.upload")); const i = document.querySelector("#upgrade .button"), r = document.querySelector("#upgrade p"); n.endsWith("/initramfs.html") ? (i && (i.textContent = t("initramfs.actionBoot")), r && (r.innerHTML = t("initramfs.upgradePrompt"))) : (i && (i.textContent = t("common.actions.update")), r && (r.innerHTML = t("common.upgradePrompt"))); const e = document.getElementById("current_mtd_layout"); e && e.textContent; const o = document.querySelector(".i.w strong"); if (o && (o.textContent = t("common.warnings.heading")), u && PAGE_TEMPLATES[u]) { const n = PAGE_TEMPLATES[u], i = document.querySelector("h1"); i && n.keys && n.keys.title && (i.textContent = t(n.keys.title)); const r = document.getElementById("hint"); if (r) { const i = n.hintTpl ? tt(n.hintTpl, resolveParams(n.hintParams)) : n.keys && n.keys.hint ? t(n.keys.hint) : ""; r.innerHTML = i } const f = document.querySelector(".i.w ul"); if (f && n.warnings) { const i = n.warnings.map(n => "string" == typeof n ? "<li>" + t(n) + "<\/li>" : "<li>" + tt(n.key, resolveParams(n.params)) + "<\/li>").join(""); f.innerHTML = i } } else if (n.endsWith("/flashing.html")) { const n = document.getElementById("title") || document.querySelector("h1"); n && (n.textContent = t("flashing.titleInProgress")); const i = document.getElementById("info"); i && (i.innerHTML = t("flashing.infoInProgress")) } else if (n.endsWith("/booting.html")) { const n = document.getElementById("title") || document.querySelector("h1"); n && (n.textContent = t("booting.titleInProgress")); const i = document.getElementById("info"); i && (i.innerHTML = t("booting.infoInProgress")) } else if (n.endsWith("/fail.html")) { const n = document.querySelector("h1"); n && (n.textContent = t("fail.title")); const i = document.querySelector(".i.e"); i && (i.innerHTML = t("fail.message")) } } } function detectTheme() { const n = localStorage.getItem("theme"); return n && "auto" !== n ? n : window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light" } function applyTheme(n) { document.documentElement.setAttribute("data-theme", n) } function setSidebarOpen(n) { document.body.classList.toggle("sidebar-open", !!n) } function toggleSidebarOpen() { setSidebarOpen(!document.body.classList.contains("sidebar-open")) } function ensureSidebarBackdrop() { if (!document.querySelector(".sidebar-backdrop")) { const n = document.createElement("div"); n.className = "sidebar-backdrop"; n.addEventListener("click", () => setSidebarOpen(!1)); document.body.appendChild(n) } } function markActiveNavItem() { const n = (location.pathname || "/").toLowerCase(), t = "/" === n || n.endsWith("/") ? "/index.html" : n; document.querySelectorAll(".sidebar .nav-item").forEach(n => { let i = (n.getAttribute("href") || "").toLowerCase(); if (i) { "/" === i && (i = "/index.html"); const r = t === i; n.classList.toggle("active", r) } }) } function initThemeWatcher() { const n = window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)"); n && n.addEventListener("change", () => { const n = localStorage.getItem("theme"); n && "auto" !== n || applyTheme(detectTheme()) }) } function buildSpecialPageUI(n) { const i = document.getElementById("m"); i && ("flashing" === n ? i.innerHTML = ['<h1 id="title">' + t("flashing.titleInProgress") + "<\/h1>", '<p id="info">' + t("flashing.infoInProgress") + "<\/p>", '<div id="l"><\/div>'].join("") : "booting" === n ? i.innerHTML = ['<h1 id="title">' + t("booting.titleInProgress") + "<\/h1>", '<p id="info">' + t("booting.infoInProgress") + "<\/p>", '<div id="l"><\/div>'].join("") : "fail" === n && (i.innerHTML = ['<h1 class="red">' + t("fail.title") + "<\/h1>", '<div class="i e">' + t("fail.message") + "<\/div>"].join(""))) } function getPageIdFromPath() { const n = (location.pathname || "").toLowerCase(); return n.endsWith("/index.html") || "/" === n || n.endsWith("/") ? "index" : n.endsWith("/uboot.html") ? "uboot" : n.endsWith("/bl2.html") ? "bl2" : n.endsWith("/gpt.html") ? "gpt" : n.endsWith("/initramfs.html") ? "initramfs" : n.endsWith("/flashing.html") ? "flashing" : n.endsWith("/fail.html") ? "fail" : n.endsWith("/booting.html") ? "booting" : null } function buildTemplateUI(n) { const i = PAGE_TEMPLATES[n]; if (i) { const r = document.getElementById("m"); if (r) { const u = "boot" === i.action.type ? t("initramfs.actionBoot") : t("common.actions.update"), f = "boot" === i.action.type ? t("initramfs.upgradePrompt") : t("common.upgradePrompt"), e = i.warnings.map(n => "string" == typeof n ? "<li>" + t(n) + "<\/li>" : "<li>" + tt(n.key, resolveParams(n.params)) + "<\/li>").join(""), o = i.hintTpl ? tt(i.hintTpl, resolveParams(i.hintParams)) : i.keys && i.keys.hint ? t(i.keys.hint) : "", s = i.showMtd ? ['<div id="mtd_layout" style="display: none;">', '  <div id="current_mtd_layout"><\/div>', "<br>", "  " + t("common.labels.choose_mtd_layout") + "\t", '  <select id="mtd_layout_label" name="mtd_layout_label"><\/select>', "  <br><br>", "<\/div>"].join("") : ""; r.innerHTML = ["<h1>" + t(i.keys.title) + "<\/h1>", '<p id="hint">' + o + "<\/p>", '<form id="form">', s, '  <input id="file" type="file" name="' + i.fileField + '">', '  <input type="button" value="' + t("common.actions.upload") + '" onclick="upload(\'' + i.fileField + "')\">", "<\/form>", '<div><div class="bar" id="bar" style="display: none; --percent: 0;"><\/div><\/div>', '<div id="size" style="display: none;">' + t("common.labels.size") + " xxxx<\/div>", '<div id="md5" style="display: none;">' + t("common.labels.md5") + " xxxx<\/div>", i.showMtd ? '<div id="mtd" style="display: none;">' + t("common.labels.mtd_layout") + " xxxx<\/div>" : "", '<div id="upgrade" style="display: none;">', "  <p>" + f + "<\/p>", '  <button class="button" onclick="location = \'' + i.action.href + "'\">" + u + "<\/button>", "<\/div>", '<div class="i w">', "  <strong>" + t("common.warnings.heading") + "<\/strong>", "  <ul>" + e + "<\/ul>", "<\/div>"].join("") } } } function renderTemplateIfApplicable() { const n = getPageIdFromPath(); n && ("gpt" !== n ? PAGE_TEMPLATES[n] ? buildTemplateUI(n) : buildSpecialPageUI(n) : guardGptPageAsync()) } function guardGptPageAsync() { window.__skipTemplateTranslation = !0; showConfirmModal({ title: t("gptConfirm.title"), message: t("gptConfirm.prompt"), yesLabel: t("common.dialog.yes"), noLabel: t("common.dialog.no") }).then(n => { if (n) buildTemplateUI("gpt"), window.__skipTemplateTranslation = !1, applyPageTranslations(); else { const n = document.getElementById("m"); if (n) { const u = t("gptConfirm.nonMmcTitle"); let i = 3; const r = () => tt("gptConfirm.nonMmcMessage", { s: i }); n.innerHTML = ['<h1 class="red">' + u + "<\/h1>", '<div class="i e" id="gpt-nonmmc-msg">' + r() + "<\/div>"].join(""); const f = setInterval(() => { i -= 1; const n = document.getElementById("gpt-nonmmc-msg"); n && (n.innerHTML = r()); i <= 0 && (clearInterval(f), location.href = "/index.html") }, 1e3) } else location.href = "/index.html" } }).catch(() => { location.href = "/index.html" }) } function showConfirmModal({ title: r, message: n, yesLabel: t, noLabel: i }) { return new Promise(u => { const l = document.getElementById("app-modal"); l && l.remove(); const f = document.createElement("div"); f.id = "app-modal"; f.className = "modal-overlay"; f.setAttribute("role", "presentation"); const e = document.createElement("div"); e.className = "modal-dialog"; e.setAttribute("role", "dialog"); e.setAttribute("aria-modal", "true"); e.setAttribute("aria-labelledby", "modal-title"); e.setAttribute("aria-describedby", "modal-desc"); e.innerHTML = ['<div class="modal-header" id="modal-title">' + r + "<\/div>", '<div class="modal-body" id="modal-desc">' + n + "<\/div>", '<div class="modal-actions">', '  <button class="btn secondary" id="modal-no">' + i + "<\/button>", '  <button class="btn primary" id="modal-yes">' + t + "<\/button>", "<\/div>"].join(""); f.appendChild(e); document.body.appendChild(f); const s = document.getElementById("modal-yes"), h = document.getElementById("modal-no"), o = n => { f.remove(), u(n) }; s.addEventListener("click", () => o(!0)); h.addEventListener("click", () => o(!1)); f.addEventListener("click", n => { n.target === f && o(!1) }); const a = n => { "Escape" === n.key ? (n.preventDefault(), o(!1)) : "Enter" === n.key ? (n.preventDefault(), o(!0)) : "Tab" === n.key && (n.preventDefault(), document.activeElement === s ? h.focus() : s.focus()) }; document.addEventListener("keydown", a, { capture: !0 }); const c = n => { document.removeEventListener("keydown", a, { capture: !0 }), o(n) }; s.addEventListener("click", () => c(!0)); h.addEventListener("click", () => c(!1)); f.addEventListener("click", n => { n.target === f && c(!1) }); h.focus() }) } function buildSidebar() { const n = document.createElement("aside"); n.className = "sidebar"; n.innerHTML = ['<div class="sidebar-title">' + t("common.app") + "<\/div>", '<nav class="nav">', '<a class="nav-item" href="/">' + t("common.nav.home") + "<\/a>", '<a class="nav-item" href="/uboot.html">' + t("common.nav.uboot") + "<\/a>", '<div class="nav-section">' + t("common.sections.enhancements") + "<\/div>", '<a class="nav-item" href="/gpt.html">' + t("common.nav.gpt") + "<\/a>", '<a class="nav-item" href="/bl2.html">' + t("common.nav.bl2") + "<\/a>", '<a class="nav-item" href="/initramfs.html">' + t("common.nav.initramfs") + "<\/a>", "<\/nav>"].join(""); document.body.appendChild(n); document.body.classList.add("has-sidebar"); ensureSidebarBackdrop(); markActiveNavItem(); n.querySelectorAll("a.nav-item").forEach(n => { n.addEventListener("click", () => setSidebarOpen(!1)) }) } function buildHeader() { const u = document.createElement("header"); u.className = "topbar"; const i = document.createElement("button"); i.className = "menu-toggle"; i.type = "button"; i.setAttribute("aria-label", t("common.ui.menu")); i.innerHTML = '<span class="menu-icon" aria-hidden="true"><\/span>'; i.addEventListener("click", toggleSidebarOpen); const f = document.createElement("div"); f.className = "topbar-controls"; const e = document.createElement("div"); e.className = "control-group"; const s = document.createElement("span"); s.className = "icon"; s.textContent = "ğŸŒ"; const r = document.createElement("select"); r.className = "control"; r.title = t("common.ui.language"); const c = localStorage.getItem("lang") || "auto";[{ v: "auto", l: t("common.language.auto") }, { v: "zh-CN", l: t("common.language.zhCN") }, { v: "en", l: t("common.language.en") }].forEach(n => { const t = document.createElement("option"); t.value = n.v; t.textContent = n.l; c === n.v && (t.selected = !0); r.appendChild(t) }); r.addEventListener("change", () => { localStorage.setItem("lang", r.value), applyPageTranslations(), document.querySelectorAll(".sidebar").forEach(n => n.remove()), document.querySelectorAll(".topbar").forEach(n => n.remove()), buildSidebar(), buildHeader() }); e.appendChild(s); e.appendChild(r); const o = document.createElement("div"); o.className = "control-group"; const h = document.createElement("span"); h.className = "icon"; h.textContent = "ğŸŒ“"; const n = document.createElement("select"); n.className = "control"; n.title = t("common.ui.theme"); const l = localStorage.getItem("theme") || "auto";[{ v: "auto", l: t("common.theme.auto") }, { v: "light", l: t("common.theme.light") }, { v: "dark", l: t("common.theme.dark") }].forEach(t => { const i = document.createElement("option"); i.value = t.v; i.textContent = t.l; l === t.v && (i.selected = !0); n.appendChild(i) }); n.addEventListener("change", () => { localStorage.setItem("theme", n.value), applyTheme("auto" === n.value ? detectTheme() : n.value) }); o.appendChild(h); o.appendChild(n); f.appendChild(e); f.appendChild(o); u.appendChild(i); u.appendChild(f); document.body.appendChild(u) } function initSite() { try { buildSidebar(); buildHeader(); applyTheme(detectTheme()); initThemeWatcher(); renderTemplateIfApplicable(); applyPageTranslations(); injectAuthorInfo(); ensureSidebarBackdrop() } catch (n) { console && console.warn && console.warn("UI init failed:", n) } } function injectAuthorInfo() { const i = document.getElementById("version"); if (i && !document.getElementById("author-info")) { const n = document.createElement("div"); n.id = "author-info"; n.className = "author-info"; n.textContent = t("common.author"); i.insertAdjacentElement("afterend", n) } } function startup() { getversion(); document.getElementById("mtd_layout") && getmtdlayoutlist() } function getmtdlayoutlist() { ajax({ url: "/getmtdlayout", done: function (n) { var i, f, r, u; if ("error" != n) { for (i = n.split(";"), document.getElementById("current_mtd_layout").innerHTML = t("common.labels.current_mtd_layout") + " " + i[0], f = document.getElementById("mtd_layout_label"), r = 1; r < i.length; r++)i[r].length > 0 && f.options.add(new Option(i[r], i[r])); (document.getElementById("mtd_layout").style.display = "", document.getElementById("mtd_layout_label")) && (u = document.getElementById("mtd_layout"), u && u.childNodes.forEach(function (n) { n.nodeType === Node.TEXT_NODE && n.nodeValue.trim().startsWith("Choose") && (n.nodeValue = t("common.labels.choose_mtd_layout") + "\t") })) } } }) } function getversion() { ajax({ url: "/version", done: function (n) { document.getElementById("version").innerHTML = n } }) } function upload(n) { var u = document.getElementById("file").files[0], r, i, f; u && (document.getElementById("form").style.display = "none", document.getElementById("hint").style.display = "none", r = new FormData, r.append(n, u), i = document.getElementById("mtd_layout_label"), i && i.options.length > 0 && (f = i.selectedIndex, r.append("mtd_layout", i.options[f].value)), ajax({ url: "/upload", data: r, done: function (n) { if ("fail" == n) location = "/fail.html"; else { const i = n.split(" "); document.getElementById("size").style.display = "block"; document.getElementById("size").innerHTML = t("common.labels.size") + " " + i[0]; document.getElementById("md5").style.display = "block"; document.getElementById("md5").innerHTML = t("common.labels.md5") + " " + i[1]; i[2] && (document.getElementById("mtd").style.display = "block", document.getElementById("mtd").innerHTML = t("common.labels.mtd_layout") + " " + i[2]); document.getElementById("upgrade").style.display = "block" } }, progress: function (n) { var t = parseInt(n.loaded / n.total * 100); document.getElementById("bar").setAttribute("style", "--percent: " + t) } })) } const I18N_DICTIONARY = { en: { common: { app: "Failsafe-WebUI", ui: { menu: "Menu", language: "Language", theme: "Theme" }, language: { auto: "Auto", zhCN: "Simplified Chinese", en: "English" }, theme: { auto: "Auto", light: "Light", dark: "Dark" }, nav: { home: "Firmware Update", uboot: "U-Boot Update", bl2: "BL2 Update", gpt: "GPT Partition", initramfs: "Initramfs" }, sections: { enhancements: "Enhancements" }, actions: { upload: "Upload", update: "Update" }, author: "ğŸ’¡ Yuzhii", dialog: { yes: "Yes", no: "No" }, targets: { firmware: "firmware image", uboot: "U-Boot image", bl2: "BL2 image", gpt: "GPT", initramfs: "initramfs image" }, hints: { update: "You are going to update <strong>{target}<\/strong> on the device.<br>Please, choose file from your local hard drive and click <strong>Upload<\/strong> button.", load: "You are going to load <strong>{target}<\/strong> on the device.<br>Please, choose file from your local hard drive and click <strong>Upload<\/strong> button." }, warns: { no_power_off: "do not power off the device during update", will_restart: "if everything goes well, the device will restart", ensure_proper_target: "you can upload whatever you want, so be sure that you choose proper {target} for your device", boot_into_target: "if everything goes well, the device will boot into the {target}" }, labels: { current_mtd_layout: "Current mtd layout:", choose_mtd_layout: "Choose mtd layout:", size: "Size:", md5: "MD5:", mtd_layout: "MTD layout:" }, warnings: { heading: "WARNINGS" }, upgradePrompt: 'If all information above is correct, click "Update".' }, index: { title: "FIRMWARE UPDATE" }, uboot: { title: "U-BOOT UPDATE", warn4: "updating U-Boot is a very dangerous operation and may damage your device!" }, bl2: { title: "BL2 UPDATE", warn4: "updating BL2 is a very dangerous operation and may damage your device!" }, gpt: { title: "GPT UPDATE", warn4: "updating GPT is a dangerous operation and may damage your device!" }, gptConfirm: { title: "GPT Update Confirmation", prompt: "Is your device an MMC device? Only MMC devices should update GPT. <strong>Updating GPT on nonâ€‘MMC devices will damage the device.<\/strong>", nonMmcTitle: "Unsupported Device", nonMmcMessage: "Updating GPT on nonâ€‘MMC devices may damage the device. Redirecting to home in {s}s..." }, initramfs: { title: "LOAD INITRAMFS", upgradePrompt: 'If all information above is correct, click "Boot".', actionBoot: "Boot" }, flashing: { titleInProgress: "UPDATE IN PROGRESS", infoInProgress: "Your file was successfully uploaded! Update is in progress and you should wait for automatic reset of the device.<br>Update time depends on image size and may take up to a few minutes.", titleDone: "UPDATE COMPLETED", infoDone: "Your device was successfully updated! Now rebooting..." }, booting: { titleInProgress: "BOOTING INITRAMFS", infoInProgress: "Your file was successfully uploaded! Booting is in progress, please wait...<br>This page may be in not responding status for a short time.", titleDone: "BOOT SUCCESS", infoDone: "Your device was successfully booted into initramfs!" }, fail: { title: "UPDATE FAILED", message: "<strong>Something went wrong during update<\/strong>Probably you have chosen wrong file. Please, try again or contact with the author of this modification. You can also get more information during update in U-Boot console." } }, "zh-CN": { common: { app: "æ¢å¤æ¨¡å¼-WebUI", ui: { menu: "èœå•", language: "è¯­è¨€", theme: "ä¸»é¢˜" }, language: { auto: "è‡ªåŠ¨", zhCN: "ç®€ä½“ä¸­æ–‡", en: "English" }, theme: { auto: "è‡ªåŠ¨", light: "æµ…è‰²", dark: "æ·±è‰²" }, nav: { home: "å›ºä»¶æ›´æ–°", uboot: "U-Boot æ›´æ–°", bl2: "BL2 æ›´æ–°", gpt: "GPT åˆ†åŒº", initramfs: "Initramfs" }, sections: { enhancements: "å¢å¼ºåŠŸèƒ½" }, actions: { upload: "ä¸Šä¼ ", update: "æ›´æ–°" }, author: "ğŸ’¡ Yuzhii", dialog: { yes: "æ˜¯", no: "å¦" }, targets: { firmware: "å›ºä»¶", uboot: "U-Boot é•œåƒ", bl2: "BL2 é•œåƒ", gpt: "GPT æ–‡ä»¶", initramfs: "initramfs é•œåƒ" }, hints: { update: "æ‚¨å°†è¦æ›´æ–°è®¾å¤‡çš„ <strong>{target}<\/strong>ã€‚<br>è¯·ä»æœ¬åœ°ç¡¬ç›˜é€‰æ‹©æ–‡ä»¶å¹¶ç‚¹å‡»<strong>ä¸Šä¼ <\/strong>æŒ‰é’®ã€‚", load: "æ‚¨å°†è¦å‘è®¾å¤‡åŠ è½½ <strong>{target}<\/strong>ã€‚<br>è¯·ä»æœ¬åœ°ç¡¬ç›˜é€‰æ‹©æ–‡ä»¶å¹¶ç‚¹å‡»<strong>ä¸Šä¼ <\/strong>æŒ‰é’®ã€‚" }, warns: { no_power_off: "æ›´æ–°è¿‡ç¨‹ä¸­è¯·å‹¿æ–­ç”µ", will_restart: "å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œè®¾å¤‡å°†ä¼šé‡å¯", ensure_proper_target: "æ‚¨å¯ä»¥ä¸Šä¼ ä»»æ„æ–‡ä»¶ï¼Œè¯·ç¡®ä¿é€‰æ‹©äº†é€‚ç”¨äºè®¾å¤‡çš„ {target}", boot_into_target: "å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œè®¾å¤‡å°†å¼•å¯¼è¿›å…¥ {target}" }, labels: { current_mtd_layout: "å½“å‰åˆ†åŒºå¸ƒå±€:", choose_mtd_layout: "é€‰æ‹©åˆ†åŒºå¸ƒå±€:", size: "å¤§å°:", md5: "MD5:", mtd_layout: "åˆ†åŒºå¸ƒå±€:" }, warnings: { heading: "è­¦å‘Š" }, upgradePrompt: "å¦‚æœä»¥ä¸Šä¿¡æ¯æ­£ç¡®ï¼Œè¯·ç‚¹å‡»â€œæ›´æ–°â€ã€‚" }, index: { title: "å›ºä»¶æ›´æ–°" }, uboot: { title: "U-Boot æ›´æ–°", warn4: "æ›´æ–° U-Boot é£é™©æé«˜ï¼Œå¯èƒ½å¯¼è‡´è®¾å¤‡æŸåï¼" }, flashing: { titleInProgress: "æ­£åœ¨æ›´æ–°", infoInProgress: "æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼æ›´æ–°æ­£åœ¨è¿›è¡Œï¼Œè¯·ç­‰å¾…è®¾å¤‡è‡ªåŠ¨é‡å¯ã€‚<br>æ›´æ–°æ—¶é—´å–å†³äºé•œåƒå¤§å°ï¼Œå¯èƒ½éœ€è¦å‡ åˆ†é’Ÿã€‚", titleDone: "æ›´æ–°å®Œæˆ", infoDone: "è®¾å¤‡å·²æˆåŠŸæ›´æ–°ï¼æ­£åœ¨é‡å¯â€¦â€¦" }, booting: { titleInProgress: "æ­£åœ¨å¼•å¯¼ Initramfs", infoInProgress: "æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼æ­£åœ¨å¼•å¯¼ï¼Œè¯·ç¨å€™â€¦â€¦<br>æ­¤é¡µé¢çŸ­æ—¶é—´å¯èƒ½æ— å“åº”å±æ­£å¸¸æƒ…å†µã€‚", titleDone: "å¼•å¯¼æˆåŠŸ", infoDone: "è®¾å¤‡å·²æˆåŠŸå¼•å¯¼è¿›å…¥ initramfsï¼" }, fail: { title: "æ›´æ–°å¤±è´¥", message: "<strong>æ›´æ–°è¿‡ç¨‹ä¸­å‡ºç°é—®é¢˜<\/strong>å¯èƒ½é€‰æ‹©äº†é”™è¯¯çš„æ–‡ä»¶ã€‚è¯·é‡è¯•æˆ–è”ç³»è¯¥ä¿®æ”¹çš„ä½œè€…ã€‚ä¹Ÿå¯åœ¨ U-Boot æ§åˆ¶å°æŸ¥çœ‹æ›´å¤šä¿¡æ¯ã€‚" }, bl2: { title: "BL2 æ›´æ–°", warn4: "æ›´æ–° BL2 é£é™©æé«˜ï¼Œå¯èƒ½å¯¼è‡´è®¾å¤‡æŸåï¼" }, gpt: { title: "GPT æ›´æ–°", warn4: "æ›´æ–° GPT å…·æœ‰ä¸€å®šé£é™©ï¼Œå¯èƒ½å¯¼è‡´è®¾å¤‡æŸåï¼" }, gptConfirm: { title: "GPT æ›´æ–°ç¡®è®¤", prompt: "ä½ çš„è®¾å¤‡æ˜¯ MMC è®¾å¤‡å—ï¼Ÿä»… MMC è®¾å¤‡å¯æ›´æ–° GPTã€‚<strong>é MMC è®¾å¤‡æ›´æ–°å¯èƒ½å¯¼è‡´è®¾å¤‡æŸåã€‚<\/strong>", nonMmcTitle: "è®¾å¤‡ä¸å—æ”¯æŒ", nonMmcMessage: "é MMC è®¾å¤‡æ›´æ–° GPT å¯èƒ½å¯¼è‡´è®¾å¤‡æŸåã€‚{s} ç§’åè¿”å›é¦–é¡µâ€¦â€¦" }, initramfs: { title: "åŠ è½½ Initramfs", upgradePrompt: "å¦‚æœä»¥ä¸Šä¿¡æ¯æ­£ç¡®ï¼Œè¯·ç‚¹å‡»â€œå¯åŠ¨â€ã€‚", actionBoot: "å¯åŠ¨" } } }; const PAGE_TEMPLATES = { index: { fileField: "firmware", action: { type: "update", href: "/flashing.html" }, showMtd: !0, keys: { title: "index.title" }, hintTpl: "common.hints.update", hintParams: { target: { t: "common.targets.firmware" } }, warnings: [{ key: "common.warns.no_power_off" }, { key: "common.warns.will_restart" }, { key: "common.warns.ensure_proper_target", params: { target: { t: "common.targets.firmware" } } }] }, uboot: { fileField: "fip", action: { type: "update", href: "/flashing.html" }, showMtd: !1, keys: { title: "uboot.title" }, hintTpl: "common.hints.update", hintParams: { target: { t: "common.targets.uboot" } }, warnings: [{ key: "common.warns.no_power_off" }, { key: "common.warns.will_restart" }, { key: "common.warns.ensure_proper_target", params: { target: { t: "common.targets.uboot" } } }, { key: "uboot.warn4" }] }, bl2: { fileField: "bl2", action: { type: "update", href: "/flashing.html" }, showMtd: !1, keys: { title: "bl2.title" }, hintTpl: "common.hints.update", hintParams: { target: { t: "common.targets.bl2" } }, warnings: [{ key: "common.warns.no_power_off" }, { key: "common.warns.will_restart" }, { key: "common.warns.ensure_proper_target", params: { target: { t: "common.targets.bl2" } } }, { key: "bl2.warn4" }] }, gpt: { fileField: "gpt", action: { type: "update", href: "/flashing.html" }, showMtd: !1, keys: { title: "gpt.title" }, hintTpl: "common.hints.update", hintParams: { target: { t: "common.targets.gpt" } }, warnings: [{ key: "common.warns.no_power_off" }, { key: "common.warns.will_restart" }, { key: "common.warns.ensure_proper_target", params: { target: { t: "common.targets.gpt" } } }, { key: "gpt.warn4" }] }, initramfs: { fileField: "initramfs", action: { type: "boot", href: "/booting.html" }, showMtd: !1, keys: { title: "initramfs.title" }, hintTpl: "common.hints.load", hintParams: { target: { t: "common.targets.initramfs" } }, warnings: [{ key: "common.warns.boot_into_target", params: { target: { t: "common.targets.initramfs" } } }, { key: "common.warns.ensure_proper_target", params: { target: { t: "common.targets.initramfs" } } }] } }; document.addEventListener("DOMContentLoaded", initSite)